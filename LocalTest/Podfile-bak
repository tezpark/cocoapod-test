source 'https://cdn.cocoapods.org/'

platform :ios, '15.0'
use_frameworks!
inhibit_all_warnings!

target 'QuickStart' do
  
  pod 'SendbirdNetworkImage', :path => '../repo/sendbird-cocoapods/Sources/NetworkImage'
  pod 'SendbirdSplash', :path => '../repo/sendbird-cocoapods/Sources/Splash'  
  pod 'SendbirdMarkdownUI', :path => '../repo/sendbird-cocoapods/Sources/MarkdownUI'
  pod 'SendbirdAIAgentCore', :path => '../repo/sendbird-cocoapods/Sources/SendbirdAIAgentCore'
  pod 'SendbirdAIAgentMessenger', :path => '../repo/sendbird-cocoapods/Sources/SendbirdAIAgentMessenger'
  pod 'SendbirdUIMessageTemplate', '~> 3.30'
  
end

post_install do |installer|
  # ğŸ¯ ê°€ì¥ ê°•ë ¥í•œ í•´ê²°ì±…: ëª¨ë“  ë¹Œë“œ ì„¤ì •ì„ ê°•ì œë¡œ í†µì¼
  
  # 1. ëª¨ë“  íƒ€ê²Ÿì˜ ë¹Œë“œ ì„¤ì • í†µì¼
  installer.pods_project.targets.each do |target|
    puts "ğŸ”§ Configuring target: #{target.name}"
    
    target.build_configurations.each do |config|
      puts "  ğŸ“ Config: #{config.name}"
      
      # ê¸°ë³¸ ì„¤ì •
      config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '15.0'
      config.build_settings['GCC_WARN_INHIBIT_ALL_WARNINGS'] = 'YES'
      config.build_settings['CLANG_WARN_DOCUMENTATION_COMMENTS'] = 'NO'
      
      # ğŸ”¥ í•µì‹¬: BUILD_LIBRARY_FOR_DISTRIBUTION ì™„ì „ ì œê±° í›„ ì¬ì„¤ì •
      config.build_settings.delete('BUILD_LIBRARY_FOR_DISTRIBUTION')
      config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'NO'
      
      # ì¼ê´€ì„±ì„ ìœ„í•œ ì¶”ê°€ ì„¤ì •
      config.build_settings['ENABLE_BITCODE'] = 'NO'
      config.build_settings['SWIFT_COMPILATION_MODE'] = 'wholemodule'
      config.build_settings['DEFINES_MODULE'] = 'YES'
      config.build_settings['ONLY_ACTIVE_ARCH'] = 'YES' if config.name == 'Debug'
    end
  end
  
  # 2. í”„ë¡œì íŠ¸ ë ˆë²¨ ì„¤ì •
  installer.pods_project.build_configurations.each do |config|
    config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'NO'
  end
  
  # 3. ì§‘ê³„ íƒ€ê²Ÿ ì„¤ì •
  installer.generated_aggregate_targets.each do |aggregate_target|
    aggregate_target.xcconfigs.each do |config_name, config_file|
      config_file.other_linker_flags[:simple] << ' -ObjC' if config_file.other_linker_flags[:simple]
    end
  end
  
  puts "âœ… All build settings unified successfully!"
end